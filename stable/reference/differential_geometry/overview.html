
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Differential Geometry: Overview &#8212; Pisces-Geometry  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/differential_geometry/overview';</script>
    <link rel="icon" href="../../_static/pm_favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Symbolic Tensor Dependence API" href="dependence.html" />
    <link rel="prev" title="Fields: Field Components" href="../fields/components.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Pisces-Geometry  documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started.html">
    Quick-start Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../auto_examples/index.html">
    Example Gallery
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    PyMetric User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started.html">
    Quick-start Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../auto_examples/index.html">
    Example Gallery
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    PyMetric User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../theory/coordinate_theory.html">Curvilinear Coordinate Systems</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../coordinates/overview.html">Coordinate Systems: General Info</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../grids/overview.html">Geometric Grids: General Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grids/build_custom_grids.html">Geometric Grids: Custom Grid Classes</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fields/overview.html">Fields: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/numpy.html">Fields: NumPy Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/buffers.html">Fields: Data Buffers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/components.html">Fields: Field Components</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Differential Geometry: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependence.html">Symbolic Tensor Dependence API</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../coordinates/dev.html">Coordinate Systems: Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grids/dev.html">Geometric Grids: Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/dev.html">Fields: Developers</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">PyMetric User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Differential Geometry: Overview</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="differential-geometry-overview">
<span id="differential-geometry"></span><h1>Differential Geometry: Overview<a class="headerlink" href="#differential-geometry-overview" title="Link to this heading">#</a></h1>
<p>The <a class="reference internal" href="../../_as_gen/differential_geometry.html#module-differential_geometry" title="differential_geometry"><code class="xref py py-mod docutils literal notranslate"><span class="pre">differential_geometry</span></code></a> module provides core functionality for performing tensor calculus
and differential geometry operations. These operations form the mathematical foundation for many
high-level features in the library, including gradients, divergences,
and Laplacians in curved spaces.</p>
<p>This module is designed to be low-level, flexible, and composable—targeted at users who need fine-grained
control over coordinate system behavior, metric tensors, and tensorial representations. It supports both
symbolic workflows (e.g., with <a class="reference external" href="https://docs.sympy.org/latest/index.html">SymPy</a>) and numerical workflows
using dense array operations.</p>
<p>Key features of the module include:</p>
<ul class="simple">
<li><p>Differential operators such as <strong>gradient</strong>, <strong>divergence</strong>, and <strong>Laplacian</strong>, compatible with arbitrary
orthogonal coordinate systems.</p></li>
<li><p>Support for <strong>tensor index manipulation</strong>, including <strong>index raising and lowering</strong>, <strong>signature adjustments</strong>,
and <strong>metric contractions</strong>.</p></li>
<li><p>Compatibility with both symbolic (e.g., for analytical derivations or code generation) and numerical (e.g., for
evaluation on structured grids) contexts.</p></li>
</ul>
<p>This module is not tied to methods in higher level modules like <a class="reference internal" href="../../_as_gen/grids.html#module-grids" title="grids"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grids</span></code></a> and <a class="reference internal" href="../../_as_gen/fields.html#module-fields" title="fields"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fields</span></code></a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Generally speaking, methods in <a class="reference internal" href="../../_as_gen/grids.html#module-grids" title="grids"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grids</span></code></a> and <a class="reference internal" href="../../_as_gen/fields.html#module-fields" title="fields"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fields</span></code></a> are better places to perform
operations than with the functions in this module unless you need very specific capabilities.</p>
</div>
<section id="module-layout">
<h2>Module Layout<a class="headerlink" href="#module-layout" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../../_as_gen/differential_geometry.html#module-differential_geometry" title="differential_geometry"><code class="xref py py-mod docutils literal notranslate"><span class="pre">differential_geometry</span></code></a> module is organized into several subcomponents, each focused on
a different aspect of differential geometry and tensor operations. These submodules provide both
symbolic and numerical utilities for manipulating tensor fields, enabling a wide range of workflows
from low-level grid computation to symbolic code generation.</p>
<section id="differences-between-dense-and-sparse-representations">
<h3>Differences Between Dense and Sparse Representations<a class="headerlink" href="#differences-between-dense-and-sparse-representations" title="Link to this heading">#</a></h3>
<ul>
<li><p><strong>Dense representation</strong>:
Stores all tensor components in a single NumPy or array-like object, with trailing dimensions indexing
each component. For example, a rank-2 tensor over a 3D grid would have shape <code class="docutils literal notranslate"><span class="pre">(nx,</span> <span class="pre">ny,</span> <span class="pre">nz,</span> <span class="pre">3,</span> <span class="pre">3)</span></code>.</p>
<ul class="simple">
<li><p>✅ Efficient for full-field computations</p></li>
<li><p>✅ Compatible with numerical backends</p></li>
<li><p>✅ Best for vector/tensor fields with all (or most) components populated</p></li>
</ul>
<p>Notably, dense representations <strong>MUST</strong> have <code class="docutils literal notranslate"><span class="pre">(ndim,)</span></code> elements in each tensor index, even if those
elements are zero.</p>
</li>
<li><p><strong>Sparse representation</strong> (planned):
Uses a dictionary to map multi-indices (e.g., <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">1)</span></code>, <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2)</span></code>) to arrays holding scalar component values.
This format is well-suited for:</p>
<ul class="simple">
<li><p>✅ Symbolic manipulation</p></li>
<li><p>✅ Fields with many zero components</p></li>
<li><p>✅ Compact storage of sparse tensors</p></li>
</ul>
</li>
</ul>
</section>
<section id="module-components">
<h3>Module Components<a class="headerlink" href="#module-components" title="Link to this heading">#</a></h3>
<p>The core subcomponents are:</p>
<ul>
<li><p><strong>Dense operations</strong> (<a class="reference internal" href="../../_as_gen/differential_geometry.dense_utils.html#module-differential_geometry.dense_utils" title="differential_geometry.dense_utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dense_utils</span></code></a> and <a class="reference internal" href="../../_as_gen/differential_geometry.dense_ops.html#module-differential_geometry.dense_ops" title="differential_geometry.dense_ops"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dense_ops</span></code></a>):
Implements numerical tensor calculus using dense arrays. Dense operations are optimized for
structured grids and provide fast evaluation of tensor operations such as:</p>
<ul class="simple">
<li><p>Tensor contraction and trace</p></li>
<li><p>Volume element computation</p></li>
<li><p>Index raising and lowering</p></li>
<li><p>Tensor permutation and signature adjustment</p></li>
</ul>
</li>
<li><p><strong>Sparse operations (planned)</strong> (<a class="reference internal" href="../../_as_gen/differential_geometry.sparse_utils.html#module-differential_geometry.sparse_utils" title="differential_geometry.sparse_utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sparse_utils</span></code></a> and <a class="reference internal" href="../../_as_gen/differential_geometry.sparse_ops.html#module-differential_geometry.sparse_ops" title="differential_geometry.sparse_ops"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sparse_ops</span></code></a>:
Sparse tensor operations (not yet fully implemented) would allow manipulating tensor fields in
a dictionary-of-components format, useful for high-rank or highly sparse tensors in symbolic contexts.</p></li>
<li><p><strong>General operations</strong> (<a class="reference internal" href="../../_as_gen/differential_geometry.general_ops.html#module-differential_geometry.general_ops" title="differential_geometry.general_ops"><code class="xref py py-mod docutils literal notranslate"><span class="pre">general_ops</span></code></a>):
General mathematical operations which apply numerically to both dense and sparse representations.</p></li>
<li><p><strong>Symbolic operations</strong> (<a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.html#module-differential_geometry.symbolic" title="differential_geometry.symbolic"><code class="xref py py-mod docutils literal notranslate"><span class="pre">symbolic</span></code></a>):
Symbolic implementations of differential operators using symbolic coordinate systems (e.g., via SymPy).
These are useful for:</p>
<ul class="simple">
<li><p>Analytical derivation</p></li>
<li><p>Code generation</p></li>
<li><p>Simplification of coordinate-dependent expressions</p></li>
</ul>
<p>Includes symbolic versions of gradient, divergence, Laplacian, etc.</p>
</li>
<li><p><strong>Dependence modeling</strong>: (<a class="reference internal" href="../../_as_gen/differential_geometry.dependence.html#module-differential_geometry.dependence" title="differential_geometry.dependence"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dependence</span></code></a>):
Symbolic tensor wrappers that allow expressing and
manipulating the dependence structure of tensors. These classes are used to:</p>
<ul class="simple">
<li><p>Track coordinate dependence</p></li>
<li><p>Generate symbolic proxies and operation rules</p></li>
<li><p>Predict the shape and axes of outputs in differential computations</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="symbolic-operations">
<h2>Symbolic Operations<a class="headerlink" href="#symbolic-operations" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.html#module-differential_geometry.symbolic" title="differential_geometry.symbolic"><code class="xref py py-mod docutils literal notranslate"><span class="pre">differential_geometry.symbolic</span></code></a> submodule provides symbolic utilities for computing core geometric
quantities in curvilinear coordinate systems using SymPy. These operations are central to performing
tensor calculus analytically or in workflows that involve symbolic manipulation, automatic code generation,
or coordinate-dependent derivations.</p>
<p>The symbolic interface supports:</p>
<ul class="simple">
<li><p><strong>Metric manipulation</strong>:</p>
<ul>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.invert_metric.html#differential_geometry.symbolic.invert_metric" title="differential_geometry.symbolic.invert_metric"><code class="xref py py-func docutils literal notranslate"><span class="pre">invert_metric()</span></code></a>: Computes the inverse of a metric tensor, whether full or diagonal.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_metric_density.html#differential_geometry.symbolic.compute_metric_density" title="differential_geometry.symbolic.compute_metric_density"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_metric_density()</span></code></a>: Computes the metric density <span class="math notranslate nohighlight">\(\rho = \sqrt{\det(g)}\)</span>.</p></li>
</ul>
</li>
<li><p><strong>Geometric operators</strong>:</p>
<ul>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_Dterm.html#differential_geometry.symbolic.compute_Dterm" title="differential_geometry.symbolic.compute_Dterm"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_Dterm()</span></code></a>: Computes the <span class="math notranslate nohighlight">\(D_\mu\)</span> terms used in divergence expressions.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_Lterm.html#differential_geometry.symbolic.compute_Lterm" title="differential_geometry.symbolic.compute_Lterm"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_Lterm()</span></code></a>: Computes the <span class="math notranslate nohighlight">\(L^\nu\)</span> terms used in Laplacian expressions.</p></li>
</ul>
</li>
<li><p><strong>Tensor index operations</strong>:</p>
<ul>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.raise_index.html#differential_geometry.symbolic.raise_index" title="differential_geometry.symbolic.raise_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">raise_index()</span></code></a>: Raises an index using the inverse metric.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.lower_index.html#differential_geometry.symbolic.lower_index" title="differential_geometry.symbolic.lower_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">lower_index()</span></code></a>: Lowers an index using the metric.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.adjust_tensor_signature.html#differential_geometry.symbolic.adjust_tensor_signature" title="differential_geometry.symbolic.adjust_tensor_signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">adjust_tensor_signature()</span></code></a>: Transforms a tensor from one index signature (covariant/contravariant) to another.</p></li>
</ul>
</li>
<li><p><strong>Differential operators</strong>:</p>
<ul>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_gradient.html#differential_geometry.symbolic.compute_gradient" title="differential_geometry.symbolic.compute_gradient"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_gradient()</span></code></a>: Computes the gradient of a scalar field in covariant or contravariant form.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_tensor_gradient.html#differential_geometry.symbolic.compute_tensor_gradient" title="differential_geometry.symbolic.compute_tensor_gradient"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_tensor_gradient()</span></code></a>: Computes the gradient of a general tensor field.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_divergence.html#differential_geometry.symbolic.compute_divergence" title="differential_geometry.symbolic.compute_divergence"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_divergence()</span></code></a>: Computes the divergence of a vector field in curved coordinates.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_laplacian.html#differential_geometry.symbolic.compute_laplacian" title="differential_geometry.symbolic.compute_laplacian"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_laplacian()</span></code></a>: Computes the scalar Laplacian in general or orthogonal coordinates.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/differential_geometry.symbolic.compute_tensor_laplacian.html#differential_geometry.symbolic.compute_tensor_laplacian" title="differential_geometry.symbolic.compute_tensor_laplacian"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_tensor_laplacian()</span></code></a>: Applies the Laplacian operator element-wise to a tensor field.</p></li>
</ul>
</li>
</ul>
<section id="diagonal-vs-full-metrics">
<h3>Diagonal vs Full Metrics<a class="headerlink" href="#diagonal-vs-full-metrics" title="Link to this heading">#</a></h3>
<p>A key feature of the symbolic operations module is its dual support for both <strong>full metric tensors</strong>
and <strong>orthogonal diagonal metrics</strong>. This design enables efficient symbolic modeling without sacrificing generality.</p>
<ul class="simple">
<li><p><strong>Full metrics</strong> are represented as <span class="math notranslate nohighlight">\(n \times n\)</span> SymPy matrices. They allow for arbitrary coordinate
systems, including non-orthogonal bases and those with off-diagonal metric terms.</p></li>
<li><p><strong>Orthogonal (diagonal) metrics</strong> are represented as 1D SymPy arrays containing only the diagonal elements
<span class="math notranslate nohighlight">\(g_{\mu\mu}\)</span>. This simplified format is valid for any orthogonal coordinate system—such as spherical,
cylindrical, or Cartesian—and avoids unnecessary complexity when off-diagonal components are zero.</p></li>
</ul>
<p>This distinction is especially important in symbolic workflows, for several reasons:</p>
<ul class="simple">
<li><p><strong>Clarity</strong>: In orthogonal systems, working directly with the diagonal metric makes expressions easier
to read, understand, and verify.</p></li>
<li><p><strong>Performance</strong>: Many symbolic operations—such as computing the determinant, inverse, or L-terms—become
significantly faster when using a diagonal representation.</p></li>
<li><p><strong>Flexibility</strong>: The ability to accept both formats allows you to use the same symbolic APIs across a wide
range of coordinate systems. For example, switching between spherical and Cartesian coordinates requires
only a change in how the metric is passed to the function.</p></li>
<li><p><strong>Reduced Overhead</strong>: For applications like code generation or educational notebooks, the diagonal format
avoids unnecessary bloat while maintaining exactness and consistency with the general theory.</p></li>
</ul>
<p>For example, both of the following inputs are valid:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Full (3x3) matrix representation</span>
<span class="n">g_full</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Matrix</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>                    <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>   <span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>                   <span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">r</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">]</span>
<span class="p">])</span>

<span class="c1"># Diagonal-only (1D) array representation</span>
<span class="n">g_diag</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">r</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>This dual-format support provides a powerful and user-friendly approach to symbolic differential geometry:
you get full generality when needed, and streamlined expressiveness when possible.</p>
</section>
</section>
<section id="dense-numerical-operations">
<h2>Dense Numerical Operations<a class="headerlink" href="#dense-numerical-operations" title="Link to this heading">#</a></h2>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymetric.differential_geometry.dense_ops</span></code> module provides low-level utilities
for computing differential geometry operations directly on <strong>dense NumPy arrays</strong>. These routines form the
numerical backend for many field-level operations and allow fine-grained control over
coordinate-aware derivatives in general and orthogonal curvilinear systems.</p>
<p>These functions operate on fields stored as contiguous arrays, where the final axes represent tensor
components (ranked structure), and the spatial axes precede them. They are designed to be efficient,
broadcast-aware, and explicitly compatible with coordinate systems via metrics and volume element terms.</p>
<p>Supported operations include:</p>
<ul class="simple">
<li><p><strong>Gradient</strong> (covariant and contravariant)</p></li>
<li><p><strong>Divergence</strong> (covariant and contravariant)</p></li>
<li><p><strong>Laplacian</strong> (scalar Laplace-Beltrami operator)</p></li>
<li><p><strong>Index manipulation</strong> (via metric contraction)</p></li>
</ul>
<p>Each operation supports:</p>
<ul class="simple">
<li><p><strong>Covariant and contravariant basis selection</strong></p></li>
<li><p><strong>Diagonal or full inverse metrics</strong> (automatically inferred)</p></li>
<li><p><strong>Precomputed derivatives</strong> (first and second) for advanced workflows</p></li>
<li><p><strong>Flexible differentiation axes</strong> via <cite>field_axes</cite> and <cite>derivative_axes</cite></p></li>
</ul>
<p>These functions are optimized for use in high-performance workflows, including:</p>
<ul class="simple">
<li><p>Broadcasting over multidimensional grid shapes</p></li>
<li><p>Avoiding unnecessary allocations via <cite>out=…</cite> buffers</p></li>
<li><p>Use with scalar, vector, or tensor fields of arbitrary rank</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>These are <strong>backend functions</strong>. They perform minimal validation and assume consistency in shapes,
axis mappings, and coordinate contexts. For safety, use high-level field methods unless you require
fine-grained control or performance.</p>
</div>
<p><strong>Example Use Case</strong>:</p>
<p>Consider a scalar field <span class="math notranslate nohighlight">\(\phi(r, \theta) = r^2 \cos(\theta)\)</span> on a 2D spherical grid.
Using dense numerical operations, one can compute its Laplacian with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pymetric.differential_geometry.dense_ops</span><span class="w"> </span><span class="kn">import</span> <span class="n">compute_laplacian</span>

<span class="n">lap</span> <span class="o">=</span> <span class="n">compute_laplacian</span><span class="p">(</span>
    <span class="n">tensor_field</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span>
    <span class="n">Fterm_field</span><span class="o">=</span><span class="n">Fterm</span><span class="p">,</span>
    <span class="n">inverse_metric_field</span><span class="o">=</span><span class="n">inverse_metric</span><span class="p">,</span>
    <span class="n">rank</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">field_axes</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="n">edge_order</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="o">*</span><span class="n">grid_coordinates</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This example highlights one of the central principles of the dense ops API: <strong>the differential structure is explicit</strong>,
and the user is in control of metrics, axes, and buffers.</p>
<p>See also:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_gradient()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_divergence()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_laplacian()</span></code></p></li>
</ul>
</section>
<section id="sparse-numerical-operations">
<h2>Sparse Numerical Operations<a class="headerlink" href="#sparse-numerical-operations" title="Link to this heading">#</a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>These features are not yet implemented in current releases of PyMetric.</p>
</div>
</section>
<section id="dependence-tracking">
<h2>Dependence Tracking<a class="headerlink" href="#dependence-tracking" title="Link to this heading">#</a></h2>
<p>A tricky aspect of performing grid-based differential operations is the possibility of
<strong>symmetry breakdown</strong>, which occurs when the geometric behavior of the coordinate system
induces spatial dependence during an operation which was not present in the original function.</p>
<p>To assist in tracking these changes, PyMetric provides the <a class="reference internal" href="../../_as_gen/differential_geometry.dependence.html#module-differential_geometry.dependence" title="differential_geometry.dependence"><code class="xref py py-mod docutils literal notranslate"><span class="pre">differential_geometry.dependence</span></code></a> module. You
can read more about it at <a class="reference internal" href="dependence.html#tensor-dependence"><span class="std std-ref">Symbolic Tensor Dependence API</span></a>.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../fields/components.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Fields: Field Components</p>
      </div>
    </a>
    <a class="right-next"
       href="dependence.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Symbolic Tensor Dependence API</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-layout">Module Layout</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#differences-between-dense-and-sparse-representations">Differences Between Dense and Sparse Representations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-components">Module Components</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#symbolic-operations">Symbolic Operations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diagonal-vs-full-metrics">Diagonal vs Full Metrics</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dense-numerical-operations">Dense Numerical Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sparse-numerical-operations">Sparse Numerical Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependence-tracking">Dependence Tracking</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/reference/differential_geometry/overview.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Eliza Diggins.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>