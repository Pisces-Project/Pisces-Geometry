
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Coordinate Systems: Developers &#8212; Pisces-Geometry  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/coordinates/dev';</script>
    <link rel="icon" href="../../_static/pm_favicon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Geometric Grids: Developers" href="../grids/dev.html" />
    <link rel="prev" title="Symbolic Tensor Dependence API" href="../differential_geometry/dependence.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Pisces-Geometry  documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started.html">
    Quick-start Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../auto_examples/index.html">
    Example Gallery
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    PyMetric User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started.html">
    Quick-start Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../auto_examples/index.html">
    Example Gallery
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    PyMetric User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../theory/coordinate_theory.html">Curvilinear Coordinate Systems</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Coordinate Systems: General Info</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../grids/overview.html">Geometric Grids: General Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grids/build_custom_grids.html">Geometric Grids: Custom Grid Classes</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fields/overview.html">Fields: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/numpy.html">Fields: NumPy Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/buffers.html">Fields: Data Buffers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/components.html">Fields: Field Components</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../differential_geometry/overview.html">Differential Geometry: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../differential_geometry/dependence.html">Symbolic Tensor Dependence API</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Coordinate Systems: Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grids/dev.html">Geometric Grids: Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fields/dev.html">Fields: Developers</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">PyMetric User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Coordinate Systems: Developers</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="coordinate-systems-developers">
<span id="coordinates-dev"></span><h1>Coordinate Systems: Developers<a class="headerlink" href="#coordinate-systems-developers" title="Link to this heading">#</a></h1>
<p>PyMetric provides a flexible framework for defining and working with custom coordinate systems using symbolic and
numerical tools. Whether you’re modeling simple orthogonal coordinates or building more complex curvilinear systems, the
coordinate system module enables precise geometric and differential computations. This guide is intended for developers
who want to implement their own coordinate systems by subclassing the appropriate base classes.</p>
<p>PyMetric is designed around <strong>curvilinear, Euclidean coordinate systems</strong>. It supports:</p>
<ul class="simple">
<li><p>Arbitrary symbolic metric tensors.</p></li>
<li><p>Symbolic differentiation, simplification, and substitution.</p></li>
<li><p>Raising/lowering indices, computing gradients, divergence, Laplacians, and Jacobians.</p></li>
<li><p>Conversion to and from Cartesian coordinates (you provide the mapping).</p></li>
</ul>
<p>At the heart of the PyMetric coordinate handling infrastructure is the <code class="xref py py-class docutils literal notranslate"><span class="pre">_CoordinateSystemBase</span></code>,
which corresponds to a <strong>generic, curvilinear coordinate system</strong>. There are also a few subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_CoordinateSystemBase</span></code>
already built into the infrastructure corresponding to various simplifying cases:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="../../_as_gen/coordinates.core.OrthogonalCoordinateSystem.html#coordinates.core.OrthogonalCoordinateSystem" title="coordinates.core.OrthogonalCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthogonalCoordinateSystem</span></code></a>: provides support for orthogonal coordinates
which allow for a simplification of the logic necessary for curvilinear coordinates.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/coordinates.core.CurvilinearCoordinateSystem.html#coordinates.core.CurvilinearCoordinateSystem" title="coordinates.core.CurvilinearCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurvilinearCoordinateSystem</span></code></a>: is simply an alias for the <code class="docutils literal notranslate"><span class="pre">_CoordinateSystemBase</span></code>,
but isn’t private and therefore exposes its documentation. This is the class which should be subclassed when building extensions.</p></li>
</ol>
<p><strong>Limitations</strong>:</p>
<ul class="simple">
<li><p><strong>No support for non-Euclidean spaces</strong>: The system does not currently handle Riemannian or pseudo-Riemannian geometries (e.g., general relativity).</p></li>
<li><p><strong>Curvilinear only</strong>: The coordinate systems must be defined using smooth, differentiable transformations. Discrete or piecewise geometries are not supported.</p></li>
<li><p><strong>No automatic embedding</strong>: The system does not auto-detect whether your coordinates live in 2D, 3D, or higher-dimensional Cartesian space — you must define these mappings explicitly.</p></li>
</ul>
<section id="coordinate-system-structural-principles">
<h2>Coordinate System Structural Principles<a class="headerlink" href="#coordinate-system-structural-principles" title="Link to this heading">#</a></h2>
<p>Before discussing the practicalities of subclassing coordinate system classes, it’s important to understand some of the
core design principles that underlie the <a class="reference internal" href="../../_as_gen/coordinates.html#module-coordinates" title="coordinates"><code class="xref py py-mod docutils literal notranslate"><span class="pre">coordinates</span></code></a> module. Working with curvilinear coordinates —
particularly when performing differential operations like gradients, divergences, or Laplacians — introduces substantial
complexity. These operations must take into account the geometry of the coordinate system itself, which makes it easy for
implementations to become tightly coupled to specific coordinate systems.</p>
<p>PyMetric takes a different approach. Instead of building differential logic directly into each coordinate system,
it separates coordinate structure from coordinate behavior. This leads to a unified, extensible, and highly symbolic
framework for working with general curvilinear geometries. The goals of this are as follows:</p>
<ol class="arabic simple">
<li><p>Create a framework for physical modeling which allows for developers to easily utilize any coordinate system relevant
to their problem without having to work out the details of differential operations.</p></li>
<li><p>To create a robust system for identifying symmetry breakage during differential operations.</p></li>
</ol>
<section id="why-a-unified-system">
<h3>Why a Unified System?<a class="headerlink" href="#why-a-unified-system" title="Link to this heading">#</a></h3>
<p>Most traditional implementations hard-code differential operators for each coordinate system (e.g., hardwiring the cylindrical gradient).
This is error-prone, difficult to extend, and virtually impossible to scale to arbitrary coordinate systems.</p>
<p>Instead, PyMetric treats the metric tensor as the fundamental source of geometric information. Once the metric is
known, all differential operations — gradients, divergence, Laplacians, index manipulation — can be derived from it automatically.</p>
<p>This means:</p>
<ul class="simple">
<li><p>You only need to define the metric tensor (and optionally coordinate transforms).</p></li>
<li><p>The system handles the rest — differential operators, basis adjustments, and symbolic simplification.</p></li>
<li><p>The same code works identically in any coordinate system.</p></li>
</ul>
<p>This design allows all downstream geometry-aware code to remain completely coordinate system agnostic.
A gradient in spherical coordinates is computed using the same logic as one in elliptical coordinates —
because the underlying differential geometry is derived from the metric.</p>
</section>
<section id="the-symbolic-numerical-duality">
<h3>The Symbolic / Numerical Duality<a class="headerlink" href="#the-symbolic-numerical-duality" title="Link to this heading">#</a></h3>
<p>A key part of this system is its reliance on symbolic mathematics through <a class="reference external" href="docs.sympy.org">sympy</a>, which allows PyMetric to:</p>
<ul class="simple">
<li><p>Build symbolic expressions for differential operators, tensors, and coordinate transformations.</p></li>
<li><p>Substitute parameter values and simplify expressions at runtime.</p></li>
<li><p>Convert symbolic expressions to fast numerical functions via automatic lambdification.</p></li>
</ul>
<p>Every coordinate system has two parallel representations:</p>
<ul class="simple">
<li><p>A <strong>symbolic form</strong>, used for introspection, algebraic manipulation, expression building, and caching.</p></li>
<li><p>A <strong>numerical form</strong>, used for evaluation on grids, fields, and during simulation.</p></li>
</ul>
<p>This dual representation ensures that the system is both flexible (symbolic) and efficient (numerical). Once you’ve defined
the symbolic structure of a coordinate system, PyMetric takes care of efficiently executing computations without
sacrificing generality.</p>
</section>
</section>
<section id="subclass-structure">
<h2>Subclass Structure<a class="headerlink" href="#subclass-structure" title="Link to this heading">#</a></h2>
<p>When defining a new coordinate system in Pisces-Geometry, the first and most important decision is which base class
to inherit from. Pisces provides two primary options:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="../../_as_gen/coordinates.core.CurvilinearCoordinateSystem.html#coordinates.core.CurvilinearCoordinateSystem" title="coordinates.core.CurvilinearCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurvilinearCoordinateSystem</span></code></a>
This class should be used when building general curvilinear coordinate systems. If your metric tensor includes off-diagonal
elements (i.e., the system is not orthogonal), this is the appropriate choice. It provides full flexibility and
requires you to define both the metric and inverse metric explicitly.</p></li>
<li><p><a class="reference internal" href="../../_as_gen/coordinates.core.OrthogonalCoordinateSystem.html#coordinates.core.OrthogonalCoordinateSystem" title="coordinates.core.OrthogonalCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthogonalCoordinateSystem</span></code></a>
This class is a specialized version of CoordinateSystemBase that simplifies implementation for orthogonal coordinate
systems — those with diagonal metric tensors. When using this base class, you only need to define the scale factors (diagonal elements of the metric tensor),
the inverse metric is computed automatically, and tensor algebra operations are more efficient due to diagonal simplifications.</p></li>
</ol>
<p><strong>Which One Should I Use?</strong></p>
<p>Use the following table as a guide:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Your Coordinate System Is…</p></th>
<th class="head"><p>Subclass From…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Orthogonal (e.g., cylindrical, polar)</p></td>
<td><p><a class="reference internal" href="../../_as_gen/coordinates.core.OrthogonalCoordinateSystem.html#coordinates.core.OrthogonalCoordinateSystem" title="coordinates.core.OrthogonalCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthogonalCoordinateSystem</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>Has off-diagonal metric terms</p></td>
<td><p><a class="reference internal" href="../../_as_gen/coordinates.core.CurvilinearCoordinateSystem.html#coordinates.core.CurvilinearCoordinateSystem" title="coordinates.core.CurvilinearCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurvilinearCoordinateSystem</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>Requires full control over tensors</p></td>
<td><p><a class="reference internal" href="../../_as_gen/coordinates.core.CurvilinearCoordinateSystem.html#coordinates.core.CurvilinearCoordinateSystem" title="coordinates.core.CurvilinearCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurvilinearCoordinateSystem</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>Has a diagonal metric and is 2D/3D</p></td>
<td><p><a class="reference internal" href="../../_as_gen/coordinates.core.OrthogonalCoordinateSystem.html#coordinates.core.OrthogonalCoordinateSystem" title="coordinates.core.OrthogonalCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthogonalCoordinateSystem</span></code></a></p></td>
</tr>
</tbody>
</table>
</div>
<p>In either case, your subclass will need to define the symbolic metric tensor and the coordinate transformation logic.
If the coordinate system is orthogonal, the orthogonal base class will take care of several tedious details (like raising/lowering tensor indices efficiently).</p>
<p>In the following sections, we’ll walk through how to set up a subclass using either approach.</p>
<p>When creating a new coordinate system subclass, you must define a set of class-level attributes that specify how the
coordinate system behaves. These attributes control initialization, dimensionality, parameter handling, and symbolic expression generation.</p>
<section id="required-class-attributes">
<h3>Required Class Attributes<a class="headerlink" href="#required-class-attributes" title="Link to this heading">#</a></h3>
<p>There are 4 <strong>class flags</strong> that need to be specified in any coordinate system
subclass:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__is_abstract__</span></code>: <code class="docutils literal notranslate"><span class="pre">bool</span></code>
Indicates whether the class is abstract. Set this to False for any subclass intended to be instantiated.
If True, the metaclass will skip validation and symbolic setup.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__setup_point__</span></code> : <code class="docutils literal notranslate"><span class="pre">'init'</span> <span class="pre">|</span> <span class="pre">'import'</span></code>
Specifies when the symbolic expressions (e.g., metric tensor, class expressions) are computed:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'init'</span></code> (default): Wait until the class is instantiated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'import'</span></code>: Build expressions at module import time. This can slow down import but may reduce startup time in some applications.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">__is_setup__</span></code>: <code class="docutils literal notranslate"><span class="pre">bool</span></code>
This should <strong>always be</strong> <code class="docutils literal notranslate"><span class="pre">False</span></code>. It is changed internally to indicate if a class has already
been loaded in a particular runtime instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__DEFAULT_REGISTRY__</span></code>: <code class="docutils literal notranslate"><span class="pre">dict</span></code>
The coordinate directory in which to register this class. By default, this is the <a class="reference internal" href="../../_as_gen/coordinates.base.DEFAULT_COORDINATE_REGISTRY.html#coordinates.base.DEFAULT_COORDINATE_REGISTRY" title="coordinates.base.DEFAULT_COORDINATE_REGISTRY"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DEFAULT_COORDINATE_REGISTRY</span></code></a>.</p></li>
</ul>
<p>There are also a number of <strong>class attributes</strong> which dictate how the class behaves:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__AXES__</span></code> : <code class="docutils literal notranslate"><span class="pre">List[str]</span></code>
The axes (coordinate variables) in this coordinate system.
This is one of the class-level attributes which is specified in all coordinate systems to determine
the names and symbols for the axes. The length of this attribute also determines how many dimensions
the coordinate system has.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__PARAMETERS__</span></code> : <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">Any]</span></code>
The parameters for this coordinate system and their default values.
Each of the parameters in <code class="xref py py-attr docutils literal notranslate"><span class="pre">PARAMETERS</span></code> may be provided as
a <code class="docutils literal notranslate"><span class="pre">kwarg</span></code> when creating a new instance of this class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__AXES_DIMENSIONS__</span></code>: <code class="docutils literal notranslate"><span class="pre">List[sp.Basic]</span> <span class="pre">=</span> <span class="pre">None</span></code>
Physical dimension associated with <strong>each</strong> entry in <code class="xref py py-attr docutils literal notranslate"><span class="pre">__AXES__</span></code>.</p>
<p>This list gives the <strong>base‐quantity</strong> (length, angle, time, …) that every
coordinate carries so that downstream utilities—distance metrics, unit-aware
gradients, field constructors, etc.—can reason about unit conversions
automatically.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">__AXES_LATEX__</span></code>: <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">None</span></code>
LaTeX representations of the coordinate axes in this coordinate system.</p>
<p>This class flag is entirely optional when implementing new coordinate systems. If
it is not set, then the axes names are used as the latex representations.</p>
</li>
</ul>
<p>As an example, the following is the first few lines of the <code class="xref py py-class docutils literal notranslate"><span class="pre">SphericalCoordinateSystem</span></code>
implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SphericalCoordinateSystem</span><span class="p">(</span><span class="n">OrthogonalCoordinateSystem</span><span class="p">):</span>
    <span class="n">__is_abstract__</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">__setup_point__</span> <span class="o">=</span> <span class="s2">&quot;init&quot;</span>
    <span class="n">__AXES__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="s2">&quot;phi&quot;</span><span class="p">]</span>
    <span class="n">__AXES_DIMENSIONS__</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">]</span>
    <span class="n">__PARAMETERS__</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Development Standard</strong>: If you are developing a new coordinate system for use in the PyMetric core code,
it should use <code class="docutils literal notranslate"><span class="pre">_setup_point__</span> <span class="pre">=</span> <span class="pre">'init'</span></code> in almost any case (unless there is specific justification). By allowing
all of the built-in coordinate systems to setup on import, there is a large computation overhead which delays import
speed.</p>
</div>
</section>
<section id="behind-the-scenes">
<h3>Behind the Scenes<a class="headerlink" href="#behind-the-scenes" title="Link to this heading">#</a></h3>
<p>When a subclass is instantiated, the following steps occur:</p>
<ol class="arabic simple">
<li><p>The <strong>metaclass</strong> verifies that required attributes are present and ensures that the structure of all of the
coordinate systems in the package are valid. If there is something wrong in this step, an error will be raised on
import.</p></li>
<li><p>The class remains <strong>partially initialized</strong> until the user <strong>instantiates it for the first time</strong>.</p></li>
<li><p>The system generates symbolic axis symbols and parameter symbols using <a class="reference external" href="https://docs.sympy.org/latest/modules/core.html#sympy.core.symbol.Symbol" title="(in SymPy v1.14.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sympy.core.symbol.Symbol</span></code></a>.</p></li>
<li><p>The metric tensor and inverse metric tensor are constructed using user-defined logic.</p></li>
<li><p>Any registered class expressions (see :ref:Class Expressions) are discovered and stored for lazy evaluation.</p></li>
<li><p>Parameter values passed during instantiation (or taken from defaults) are substituted into symbolic expressions to create instance-level expressions and callables.</p></li>
</ol>
<section id="setting-up-conversion-standards">
<h4>Setting up Conversion Standards<a class="headerlink" href="#setting-up-conversion-standards" title="Link to this heading">#</a></h4>
<p>All coordinate system classes in PyMetric must define how to convert between the native coordinate system and
standard Cartesian coordinates. This is especially important for visualization, interoperation with external tools, and validating geometric behavior numerically.</p>
<p>To support this, your subclass must implement two methods:</p>
<ol class="arabic simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_convert_native_to_cartesian()</span></code>
Converts native coordinate variables (e.g., r, theta, z) to Cartesian coordinates (x, y, z).</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_convert_cartesian_to_native()</span></code>
Converts from Cartesian coordinates back to your system’s native coordinates.</p></li>
</ol>
<p>Each of these functions should take <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">x_1,x_2,x_3,...</span></code> where each <code class="docutils literal notranslate"><span class="pre">x</span></code> corresponds to a coordinate
of the coordinate system. It should return a tuple of values <code class="docutils literal notranslate"><span class="pre">z_1,z_2,...</span></code> corresponding to the converted values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important to ensure that your computations behave naturally for vectorized inputs. Thus, if <code class="docutils literal notranslate"><span class="pre">x,y,z</span></code> are each
the same size, so to should be the output <code class="docutils literal notranslate"><span class="pre">u,v,w</span></code>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SphericalCoordinateSystem</span><span class="p">(</span><span class="n">_OrthogonalCoordinateSystemBase</span><span class="p">):</span>
    <span class="n">__is_abstract__</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">__setup_point__</span> <span class="o">=</span> <span class="s1">&#39;init&#39;</span>
    <span class="n">__AXES__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span><span class="s1">&#39;phi&#39;</span><span class="p">]</span>
    <span class="n">__PARAMETERS__</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_cartesian_to_native</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">z</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">phi</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_native_to_cartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>
</pre></div>
</div>
</section>
<section id="setting-up-the-metric">
<h4>Setting up The Metric<a class="headerlink" href="#setting-up-the-metric" title="Link to this heading">#</a></h4>
<p>Every coordinate system in PyMetric must define a metric tensor, which encodes how distances and derivatives are
computed. The metric defines the inner product structure of the space, and is central to computing gradients, divergence,
Laplacians, and performing index manipulations.</p>
<p>Pisces supports both general curvilinear and orthogonal coordinate systems. The structure of the metric depends on which type you are building.</p>
<p>If you are subclassing from :py:class:~pymetric.coordinates.base.CoordinateSystemBase, you must implement both of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span> <span class="pre">def</span> <span class="pre">__construct_metric_tensor_symbol__(*args,</span> <span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">sp.Matrix</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span> <span class="pre">def</span> <span class="pre">__construct_inverse_metric_tensor_symbol__(*args,</span> <span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">sp.Matrix</span></code></p></li>
</ul>
<p>If you subclass from <a class="reference internal" href="../../_as_gen/coordinates.core.OrthogonalCoordinateSystem.html#coordinates.core.OrthogonalCoordinateSystem" title="coordinates.core.OrthogonalCoordinateSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrthogonalCoordinateSystem</span></code></a>, you only need to define
the diagonal elements of the metric tensor — that is, the scale factors squared. The inverse metric will be computed automatically as <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">g[i]</span></code>.</p>
<p>You must implement:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span> <span class="pre">def</span> <span class="pre">__construct_metric_tensor_symbol__(*args,</span> <span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">sp.Array</span></code></p></li>
</ul>
<p>These methods receive:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*args</span></code>: positional arguments representing the symbolic axis variables (e.g., <code class="docutils literal notranslate"><span class="pre">r,</span> <span class="pre">theta,</span> <span class="pre">z</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>: keyword arguments representing symbolic parameters (e.g., <code class="docutils literal notranslate"><span class="pre">scale=Symbol('scale')</span></code>).</p></li>
</ul>
<p>They should return a full SymPy matrix representing the metric tensor (or its inverse).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>What’s happening internally?</strong></p>
<p>During class setup (either at import time or instantiation time, depending on <code class="docutils literal notranslate"><span class="pre">__setup_point__</span></code>), the metric tensor is:</p>
<ul class="simple">
<li><p>Constructed symbolically using the method(s) above.</p></li>
<li><p>Stored as <code class="docutils literal notranslate"><span class="pre">cls.__class_metric_tensor__</span></code> and <code class="docutils literal notranslate"><span class="pre">cls.__class_inverse_metric_tensor__</span></code>.</p></li>
</ul>
<p>Once a user instantiates the class, the <code class="docutils literal notranslate"><span class="pre">__class_metric_tensor__</span></code> has its parameters substituted for the true
values of the parameters to create the <code class="docutils literal notranslate"><span class="pre">__metric_tensor_expression__</span></code> attribute. This is then converted to a numerical
function which is accessible by <a class="reference internal" href="../../_as_gen/coordinates.core.CurvilinearCoordinateSystem.metric_tensor.html#coordinates.core.CurvilinearCoordinateSystem.metric_tensor" title="coordinates.core.CurvilinearCoordinateSystem.metric_tensor"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metric_tensor</span></code></a>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SphericalCoordinateSystem</span><span class="p">(</span><span class="n">_OrthogonalCoordinateSystemBase</span><span class="p">):</span>
    <span class="n">__is_abstract__</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">__setup_point__</span> <span class="o">=</span> <span class="s1">&#39;init&#39;</span>
    <span class="n">__AXES__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span><span class="s1">&#39;phi&#39;</span><span class="p">]</span>
    <span class="n">__PARAMETERS__</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__construct_metric_tensor_symbol__</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">phi</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sp</span><span class="o">.</span><span class="n">Array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">,(</span><span class="n">r</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_cartesian_to_native</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">z</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">r</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">phi</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_native_to_cartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="extending-functionality">
<h2>Extending Functionality<a class="headerlink" href="#extending-functionality" title="Link to this heading">#</a></h2>
<p>While defining a new coordinate system typically involves specifying just the metric, parameters, and coordinate transforms,
PyMetric provides many extension points for more advanced functionality.</p>
<p>You might consider extending the coordinate system class if:</p>
<ul class="simple">
<li><p>You want to define custom expressions (e.g., Jacobians, scale factors, special transformation operators).</p></li>
<li><p>You want to implement custom tensor operators unique to your coordinate system.</p></li>
<li><p>You want to add parameterized behaviors (e.g., boundary-aware metrics, scaling functions, anisotropy).</p></li>
<li><p>You want to define alternate coordinate bases or embed coordinate systems into higher-dimensional manifolds.</p></li>
</ul>
<p>PyMetric is designed to be modular and override-friendly. Any method defined on a subclass can be overridden in
your coordinate system, as long as the expected structure is maintained.</p>
<p>Additionally, you can extend coordinate systems to interact with external systems (e.g., visualization tools, mesh generators, simulation frameworks) by exposing additional utility methods.</p>
<p>In many coordinate systems, it’s helpful to define reusable symbolic expressions — like Jacobians, divergence terms,
or scale factors. PyMetric provides a decorator-based mechanism to define these as <strong>class expressions</strong>.</p>
<p>To define a class expression, decorate a <code class="docutils literal notranslate"><span class="pre">classmethod</span></code> using <code class="docutils literal notranslate"><span class="pre">&#64;class_expression</span></code> (<a class="reference internal" href="../../_as_gen/coordinates.base.class_expression.html#coordinates.base.class_expression" title="coordinates.base.class_expression"><code class="xref py py-func docutils literal notranslate"><span class="pre">class_expression()</span></code></a>).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyCoordinateSystem</span><span class="p">(</span><span class="n">CoordinateSystemBase</span><span class="p">):</span>
    <span class="n">__AXES__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="n">__PARAMETERS__</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__construct_metric_tensor_symbol__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sp</span><span class="o">.</span><span class="n">Matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">]])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__construct_inverse_metric_tensor_symbol__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sp</span><span class="o">.</span><span class="n">Matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)]])</span>

    <span class="nd">@class_expression</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;jacobian&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_jacobian</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">__class_metric_tensor__</span><span class="p">))</span>
</pre></div>
</div>
<p>Coordinate systems in PyMetric are fully extensible Python classes. You are free to define any instance or class methods that help support your use case. This might include:</p>
<ul class="simple">
<li><p>Utility functions for working with particular axes.</p></li>
<li><p>Projection or slicing routines.</p></li>
<li><p>Analytical identities or symmetries.</p></li>
<li><p>Shape checks or domain constraints.</p></li>
<li><p>Integrations with other Pisces modules.</p></li>
</ul>
<p>These methods will have full access to the symbolic structure of the system — including parameters, symbolic axes, metric tensors, and coordinate transformations.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../differential_geometry/dependence.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Symbolic Tensor Dependence API</p>
      </div>
    </a>
    <a class="right-next"
       href="../grids/dev.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Geometric Grids: Developers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinate-system-structural-principles">Coordinate System Structural Principles</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-a-unified-system">Why a Unified System?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-symbolic-numerical-duality">The Symbolic / Numerical Duality</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subclass-structure">Subclass Structure</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#required-class-attributes">Required Class Attributes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#behind-the-scenes">Behind the Scenes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-conversion-standards">Setting up Conversion Standards</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-metric">Setting up The Metric</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extending-functionality">Extending Functionality</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/reference/coordinates/dev.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Eliza Diggins.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>